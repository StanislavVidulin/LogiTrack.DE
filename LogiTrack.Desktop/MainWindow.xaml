<Window x:Class="LogiTrack.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="LogiTrack" Height="800" Width="1250" 
        Background="#121416" FontFamily="Segoe UI" 
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded">

    <Window.Resources>

        <Style TargetType="ScrollBar">
            <Setter Property="Width" Value="8"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid Background="Transparent">
                            <Track x:Name="PART_Track" IsDirectionReversed="true">
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Border Background="#3E3E42" CornerRadius="4" Margin="2,0"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PremiumButtonStyle" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="12">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#2D2D2D"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1A1A1A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PremiumTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#333"/>
            <Setter Property="CaretBrush" Value="#1ABC9C"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="bg" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1.5" CornerRadius="12">
                            <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="bg" Property="BorderBrush" Value="#1ABC9C"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="ComboBoxItem">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border x:Name="ItemBorder" Background="{TemplateBinding Background}" BorderThickness="0" Padding="{TemplateBinding Padding}">
                            <ContentPresenter />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ItemBorder" Property="Background" Value="#333333"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="ItemBorder" Property="Background" Value="#444444"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="DarkComboBoxTemplate" TargetType="ComboBox">
            <Grid>
                <ToggleButton x:Name="ToggleButton" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Cursor="Hand">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="Border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1.5" CornerRadius="10">
                                <Path Data="M0,0 L4,4 L8,0" Stroke="#777" StrokeThickness="2" HorizontalAlignment="Right" Margin="0,0,10,0" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>
                <ContentPresenter Name="ContentSite" IsHitTestVisible="False" Content="{TemplateBinding SelectionBoxItem}" Margin="12,3,23,3" VerticalAlignment="Center" HorizontalAlignment="Left" />
                <Popup Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsDropDownOpen}" AllowsTransparency="True" PopupAnimation="Slide">
                    <Border Background="#1A1A1A" BorderBrush="#333" BorderThickness="1" CornerRadius="8" MinWidth="{TemplateBinding ActualWidth}">
                        <ItemsPresenter />
                    </Border>
                </Popup>
            </Grid>
        </ControlTemplate>

        <Style x:Key="FilterComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#333"/>
            <Setter Property="Template" Value="{StaticResource DarkComboBoxTemplate}"/>
        </Style>

        <Style x:Key="StatusComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#444"/>
            <Setter Property="Template" Value="{StaticResource DarkComboBoxTemplate}"/>
        </Style>

        <DataTemplate x:Key="ShipmentCardTemplate">
            <Border Width="260" MinHeight="360" Margin="10" Background="#211E1E" CornerRadius="20" Padding="20">
                <StackPanel>
                    <Grid Margin="0,0,0,10">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Ellipse x:Name="StatusCircle" Width="16" Height="16">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="#F1C40F"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Status}" Value="InTransit">
                                                <Setter Property="Fill" Value="#3498DB"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}" Value="Delivered">
                                                <Setter Property="Fill" Value="#2ECC71"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>
                            <TextBlock Text="{Binding Status}" Foreground="White" FontSize="16" FontWeight="Bold" Margin="8,0,0,0"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                            <TextBlock Text="{Binding Weight}" Foreground="White" FontSize="16" FontWeight="SemiBold"/>
                            <TextBlock Text=" KG" Foreground="White" FontSize="16" VerticalAlignment="Bottom" Margin="2,0,0,1"/>
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="{Binding Price, StringFormat={}{0:N2} €}" FontSize="24" FontWeight="Bold" Foreground="#10E919" HorizontalAlignment="Center" Margin="0,10,0,0"/>

                    <Rectangle Height="1" Fill="#333" Margin="0,15"/>

                    <TextBlock Text="{Binding CityFrom}" Foreground="White" FontSize="18" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                    <TextBlock Text="↓" Foreground="#1ABC9C" HorizontalAlignment="Center" FontSize="30" Margin="0,2"/>
                    <TextBlock Text="{Binding CityTo}" Foreground="White" FontSize="18" FontWeight="SemiBold" HorizontalAlignment="Center"/>

                    <ComboBox Margin="0,20,0,0" Height="35" Style="{StaticResource StatusComboBoxStyle}" 
                      SelectedValue="{Binding Status, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                      SelectedValuePath="Content" SelectionChanged="StatusCombo_SelectionChanged">
                        <ComboBoxItem Content="Pending"/>
                        <ComboBoxItem Content="InTransit"/>
                        <ComboBoxItem Content="Delivered"/>
                    </ComboBox>

                    <Button Content="DELETE" Tag="{Binding Id}" Click="BtnDelete_Click" 
                    Style="{StaticResource PremiumButtonStyle}" Background="#D42F1E" 
                    Height="30" Width="210" Margin="0,12,0,0" FontSize="11"/>

                    <Separator Background="#252525" Margin="0,15,0,8"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="CREATED:" Foreground="White" FontSize="11" FontWeight="Bold" Margin="0,0,5,0"/>
                        <TextBlock Text="{Binding CreatedAt, StringFormat={}{0:HH:mm dd.MM.yy}}" Foreground="White" FontSize="11"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </DataTemplate>
    </Window.Resources>

    <Grid Margin="30">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="320"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Background="#211E1E" CornerRadius="25" Padding="25">
            <StackPanel TextElement.Foreground="White">
                <TextBlock Text="LogiTrack" FontSize="28" FontWeight="ExtraBold" Foreground="#1ABC9C" HorizontalAlignment="Center"/>
                <TextBlock Text="Management System" Foreground="#7F877F" FontSize="13" Margin="0,0,0,35" HorizontalAlignment="Center"/>

                <TextBlock Text="FROM CITY" FontSize="11" FontWeight="Bold" Margin="5,0"/>
                <TextBox x:Name="TxtFrom" Style="{StaticResource PremiumTextBox}" Margin="0,5,0,15" Height="45"/>

                <TextBlock Text="TO CITY" FontSize="11" FontWeight="Bold" Margin="5,0"/>
                <TextBox x:Name="TxtTo" Style="{StaticResource PremiumTextBox}" Margin="0,5,0,15" Height="45"/>

                <TextBlock Text="WEIGHT (KG)" FontSize="11" FontWeight="Bold" Margin="5,0"/>
                <TextBox x:Name="TxtWeight" Style="{StaticResource PremiumTextBox}" Margin="0,5,0,20" Height="45"/>

                <Button Content="CALCULATE &amp; ADD" Click="BtnAdd_Click" Style="{StaticResource PremiumButtonStyle}" Background="#1ABC9C" Height="40"/>
            </StackPanel>
        </Border>

        <Grid Grid.Column="1" Margin="30,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid Margin="0,0,10,25">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="200"/>
                </Grid.ColumnDefinitions>
                <TextBox x:Name="TxtSearch" Style="{StaticResource PremiumTextBox}" Margin="0,0,15,0" Height="45" TextChanged="TxtSearch_TextChanged"/>
                <ComboBox x:Name="SortCombo" Grid.Column="1" Style="{StaticResource FilterComboBoxStyle}" Height="45" SelectionChanged="SortCombo_SelectionChanged">
                    <ComboBoxItem Content="Newest First" IsSelected="True"/>
                    <ComboBoxItem Content="Oldest First"/>
                </ComboBox>
            </Grid>
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="ShipmentsList" ItemTemplate="{StaticResource ShipmentCardTemplate}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ScrollViewer>
            <Border Grid.Row="2" Background="#211E1E" CornerRadius="20" Padding="10" Margin="0,20,0,0">
                <UniformGrid Columns="5">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="TOTAL PENDING" Foreground="White" FontSize="11" FontWeight="Bold"/>
                        <TextBlock x:Name="LblPendingCount" Text="0" Foreground="#F1C40F" FontSize="22" FontWeight="Bold"/>
                    </StackPanel>
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="TOTAL IN TRANSIT" Foreground="White" FontSize="11" FontWeight="Bold"/>
                        <TextBlock x:Name="LblInTransitCount" Text="0" Foreground="#3498DB" FontSize="22" FontWeight="Bold"/>
                    </StackPanel>
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="TOTAL DELIVERED" Foreground="White" FontSize="11" FontWeight="Bold"/>
                        <TextBlock x:Name="LblDeliveredCount" Text="0" Foreground="#2ECC71" FontSize="22" FontWeight="Bold"/>
                    </StackPanel>
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="TOTAL REVENUE" Foreground="White" FontSize="11" FontWeight="Bold"/>
                        <TextBlock x:Name="LblTotalRevenue" Text="0.00 €" Foreground="#10E919" FontSize="22" FontWeight="Bold"/>
                    </StackPanel>
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="TOTAL WEIGHT" Foreground="White" FontSize="11" FontWeight="Bold"/>
                        <TextBlock x:Name="LblTotalWeight" Text="0.0 kg" Foreground="White" FontSize="22" FontWeight="Bold"/>
                    </StackPanel>
                </UniformGrid>
            </Border>
        </Grid>
    </Grid>
</Window>